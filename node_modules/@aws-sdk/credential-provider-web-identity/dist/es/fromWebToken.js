import { CredentialsProviderError } from "@aws-sdk/property-provider";
export var fromWebToken = function (init) {
    return function () {
        var roleArn = init.roleArn, roleSessionName = init.roleSessionName, webIdentityToken = init.webIdentityToken, providerId = init.providerId, policyArns = init.policyArns, policy = init.policy, durationSeconds = init.durationSeconds, roleAssumerWithWebIdentity = init.roleAssumerWithWebIdentity;
        if (!roleAssumerWithWebIdentity) {
            throw new CredentialsProviderError("Role Arn '" + roleArn + "' needs to be assumed with web identity," +
                " but no role assumption callback was provided.", false);
        }
        return roleAssumerWithWebIdentity({
            RoleArn: roleArn,
            RoleSessionName: roleSessionName !== null && roleSessionName !== void 0 ? roleSessionName : "aws-sdk-js-session-" + Date.now(),
            WebIdentityToken: webIdentityToken,
            ProviderId: providerId,
            PolicyArns: policyArns,
            Policy: policy,
            DurationSeconds: durationSeconds,
        });
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJvbVdlYlRva2VuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Zyb21XZWJUb2tlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQWlJdEUsTUFBTSxDQUFDLElBQU0sWUFBWSxHQUN2QixVQUFDLElBQXNCO0lBQ3ZCLE9BQUE7UUFFSSxJQUFBLE9BQU8sR0FRTCxJQUFJLFFBUkMsRUFDUCxlQUFlLEdBT2IsSUFBSSxnQkFQUyxFQUNmLGdCQUFnQixHQU1kLElBQUksaUJBTlUsRUFDaEIsVUFBVSxHQUtSLElBQUksV0FMSSxFQUNWLFVBQVUsR0FJUixJQUFJLFdBSkksRUFDVixNQUFNLEdBR0osSUFBSSxPQUhBLEVBQ04sZUFBZSxHQUViLElBQUksZ0JBRlMsRUFDZiwwQkFBMEIsR0FDeEIsSUFBSSwyQkFEb0IsQ0FDbkI7UUFFVCxJQUFJLENBQUMsMEJBQTBCLEVBQUU7WUFDL0IsTUFBTSxJQUFJLHdCQUF3QixDQUNoQyxlQUFhLE9BQU8sNkNBQTBDO2dCQUM1RCxnREFBZ0QsRUFDbEQsS0FBSyxDQUNOLENBQUM7U0FDSDtRQUVELE9BQU8sMEJBQTBCLENBQUM7WUFDaEMsT0FBTyxFQUFFLE9BQU87WUFDaEIsZUFBZSxFQUFFLGVBQWUsYUFBZixlQUFlLGNBQWYsZUFBZSxHQUFJLHdCQUFzQixJQUFJLENBQUMsR0FBRyxFQUFJO1lBQ3RFLGdCQUFnQixFQUFFLGdCQUFnQjtZQUNsQyxVQUFVLEVBQUUsVUFBVTtZQUN0QixVQUFVLEVBQUUsVUFBVTtZQUN0QixNQUFNLEVBQUUsTUFBTTtZQUNkLGVBQWUsRUFBRSxlQUFlO1NBQ2pDLENBQUMsQ0FBQztJQUNMLENBQUM7QUE3QkQsQ0E2QkMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENyZWRlbnRpYWxzUHJvdmlkZXJFcnJvciB9IGZyb20gXCJAYXdzLXNkay9wcm9wZXJ0eS1wcm92aWRlclwiO1xuaW1wb3J0IHsgQ3JlZGVudGlhbFByb3ZpZGVyLCBDcmVkZW50aWFscyB9IGZyb20gXCJAYXdzLXNkay90eXBlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFzc3VtZVJvbGVXaXRoV2ViSWRlbnRpdHlQYXJhbXMge1xuICAvKipcbiAgICogPHA+VGhlIEFtYXpvbiBSZXNvdXJjZSBOYW1lIChBUk4pIG9mIHRoZSByb2xlIHRoYXQgdGhlIGNhbGxlciBpcyBhc3N1bWluZy48L3A+XG4gICAqL1xuICBSb2xlQXJuOiBzdHJpbmc7XG4gIC8qKlxuICAgKiA8cD5BbiBpZGVudGlmaWVyIGZvciB0aGUgYXNzdW1lZCByb2xlIHNlc3Npb24uIFR5cGljYWxseSwgeW91IHBhc3MgdGhlIG5hbWUgb3IgaWRlbnRpZmllclxuICAgKiAgICAgICAgICB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdXNlciB3aG8gaXMgdXNpbmcgeW91ciBhcHBsaWNhdGlvbi4gVGhhdCB3YXksIHRoZSB0ZW1wb3JhcnlcbiAgICogICAgICAgICAgc2VjdXJpdHkgY3JlZGVudGlhbHMgdGhhdCB5b3VyIGFwcGxpY2F0aW9uIHdpbGwgdXNlIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhhdCB1c2VyLiBUaGlzXG4gICAqICAgICAgICAgIHNlc3Npb24gbmFtZSBpcyBpbmNsdWRlZCBhcyBwYXJ0IG9mIHRoZSBBUk4gYW5kIGFzc3VtZWQgcm9sZSBJRCBpbiB0aGVcbiAgICogICAgICAgICAgICAgPGNvZGU+QXNzdW1lZFJvbGVVc2VyPC9jb2RlPiByZXNwb25zZSBlbGVtZW50LjwvcD5cbiAgICogICAgICAgICAgPHA+VGhlIHJlZ2V4IHVzZWQgdG8gdmFsaWRhdGUgdGhpcyBwYXJhbWV0ZXIgaXMgYSBzdHJpbmcgb2YgY2hhcmFjdGVyc1xuICAgKiAgICAgY29uc2lzdGluZyBvZiB1cHBlci0gYW5kIGxvd2VyLWNhc2UgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCBubyBzcGFjZXMuIFlvdSBjYW5cbiAgICogICAgIGFsc28gaW5jbHVkZSB1bmRlcnNjb3JlcyBvciBhbnkgb2YgdGhlIGZvbGxvd2luZyBjaGFyYWN0ZXJzOiA9LC5ALTwvcD5cbiAgICovXG4gIFJvbGVTZXNzaW9uTmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogPHA+VGhlIE9BdXRoIDIuMCBhY2Nlc3MgdG9rZW4gb3IgT3BlbklEIENvbm5lY3QgSUQgdG9rZW4gdGhhdCBpcyBwcm92aWRlZCBieSB0aGUgaWRlbnRpdHlcbiAgICogICAgICAgICAgcHJvdmlkZXIuIFlvdXIgYXBwbGljYXRpb24gbXVzdCBnZXQgdGhpcyB0b2tlbiBieSBhdXRoZW50aWNhdGluZyB0aGUgdXNlciB3aG8gaXMgdXNpbmcgeW91clxuICAgKiAgICAgICAgICBhcHBsaWNhdGlvbiB3aXRoIGEgd2ViIGlkZW50aXR5IHByb3ZpZGVyIGJlZm9yZSB0aGUgYXBwbGljYXRpb24gbWFrZXMgYW5cbiAgICogICAgICAgICAgICAgPGNvZGU+QXNzdW1lUm9sZVdpdGhXZWJJZGVudGl0eTwvY29kZT4gY2FsbC4gPC9wPlxuICAgKi9cbiAgV2ViSWRlbnRpdHlUb2tlbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiA8cD5UaGUgZnVsbHkgcXVhbGlmaWVkIGhvc3QgY29tcG9uZW50IG9mIHRoZSBkb21haW4gbmFtZSBvZiB0aGUgaWRlbnRpdHkgcHJvdmlkZXIuPC9wPlxuICAgKiAgICAgICAgICA8cD5TcGVjaWZ5IHRoaXMgdmFsdWUgb25seSBmb3IgT0F1dGggMi4wIGFjY2VzcyB0b2tlbnMuIEN1cnJlbnRseVxuICAgKiAgICAgICAgICAgICA8Y29kZT53d3cuYW1hem9uLmNvbTwvY29kZT4gYW5kIDxjb2RlPmdyYXBoLmZhY2Vib29rLmNvbTwvY29kZT4gYXJlIHRoZSBvbmx5IHN1cHBvcnRlZFxuICAgKiAgICAgICAgICBpZGVudGl0eSBwcm92aWRlcnMgZm9yIE9BdXRoIDIuMCBhY2Nlc3MgdG9rZW5zLiBEbyBub3QgaW5jbHVkZSBVUkwgc2NoZW1lcyBhbmQgcG9ydFxuICAgKiAgICAgICAgICBudW1iZXJzLjwvcD5cbiAgICogICAgICAgICAgPHA+RG8gbm90IHNwZWNpZnkgdGhpcyB2YWx1ZSBmb3IgT3BlbklEIENvbm5lY3QgSUQgdG9rZW5zLjwvcD5cbiAgICovXG4gIFByb3ZpZGVySWQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIDxwPlRoZSBBbWF6b24gUmVzb3VyY2UgTmFtZXMgKEFSTnMpIG9mIHRoZSBJQU0gbWFuYWdlZCBwb2xpY2llcyB0aGF0IHlvdSB3YW50IHRvIHVzZSBhc1xuICAgKiAgICAgICAgICBtYW5hZ2VkIHNlc3Npb24gcG9saWNpZXMuIFRoZSBwb2xpY2llcyBtdXN0IGV4aXN0IGluIHRoZSBzYW1lIGFjY291bnQgYXMgdGhlIHJvbGUuPC9wPlxuICAgKiAgICAgICAgICA8cD5UaGlzIHBhcmFtZXRlciBpcyBvcHRpb25hbC4gWW91IGNhbiBwcm92aWRlIHVwIHRvIDEwIG1hbmFnZWQgcG9saWN5IEFSTnMuIEhvd2V2ZXIsIHRoZVxuICAgKiAgICAgICAgICBwbGFpbiB0ZXh0IHRoYXQgeW91IHVzZSBmb3IgYm90aCBpbmxpbmUgYW5kIG1hbmFnZWQgc2Vzc2lvbiBwb2xpY2llcyBjYW4ndCBleGNlZWQgMiwwNDhcbiAgICogICAgICAgICAgY2hhcmFjdGVycy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgQVJOcywgc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vZ2VuZXJhbC9sYXRlc3QvZ3IvYXdzLWFybnMtYW5kLW5hbWVzcGFjZXMuaHRtbFwiPkFtYXpvbiBSZXNvdXJjZSBOYW1lcyAoQVJOcykgYW5kIEFXU1xuICAgKiAgICAgICAgICAgICBTZXJ2aWNlIE5hbWVzcGFjZXM8L2E+IGluIHRoZSBBV1MgR2VuZXJhbCBSZWZlcmVuY2UuPC9wPlxuICAgKiAgICAgICAgICA8bm90ZT5cbiAgICogICAgICAgICAgICAgPHA+QW4gQVdTIGNvbnZlcnNpb24gY29tcHJlc3NlcyB0aGUgcGFzc2VkIHNlc3Npb24gcG9saWNpZXMgYW5kIHNlc3Npb24gdGFncyBpbnRvIGFcbiAgICogICAgICAgICAgICAgcGFja2VkIGJpbmFyeSBmb3JtYXQgdGhhdCBoYXMgYSBzZXBhcmF0ZSBsaW1pdC4gWW91ciByZXF1ZXN0IGNhbiBmYWlsIGZvciB0aGlzIGxpbWl0XG4gICAqICAgICAgICAgICAgIGV2ZW4gaWYgeW91ciBwbGFpbiB0ZXh0IG1lZXRzIHRoZSBvdGhlciByZXF1aXJlbWVudHMuIFRoZSA8Y29kZT5QYWNrZWRQb2xpY3lTaXplPC9jb2RlPlxuICAgKiAgICAgICAgICAgICByZXNwb25zZSBlbGVtZW50IGluZGljYXRlcyBieSBwZXJjZW50YWdlIGhvdyBjbG9zZSB0aGUgcG9saWNpZXMgYW5kIHRhZ3MgZm9yIHlvdXJcbiAgICogICAgICAgICAgICAgcmVxdWVzdCBhcmUgdG8gdGhlIHVwcGVyIHNpemUgbGltaXQuXG4gICAqICAgICAgICAgICAgIDwvcD5cbiAgICogICAgICAgICAgPC9ub3RlPlxuICAgKlxuICAgKiAgICAgICAgICA8cD5QYXNzaW5nIHBvbGljaWVzIHRvIHRoaXMgb3BlcmF0aW9uIHJldHVybnMgbmV3XG4gICAqICAgICAgICAgIHRlbXBvcmFyeSBjcmVkZW50aWFscy4gVGhlIHJlc3VsdGluZyBzZXNzaW9uJ3MgcGVybWlzc2lvbnMgYXJlIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlXG4gICAqICAgICAgICAgIHJvbGUncyBpZGVudGl0eS1iYXNlZCBwb2xpY3kgYW5kIHRoZSBzZXNzaW9uIHBvbGljaWVzLiBZb3UgY2FuIHVzZSB0aGUgcm9sZSdzIHRlbXBvcmFyeVxuICAgKiAgICAgICAgICBjcmVkZW50aWFscyBpbiBzdWJzZXF1ZW50IEFXUyBBUEkgY2FsbHMgdG8gYWNjZXNzIHJlc291cmNlcyBpbiB0aGUgYWNjb3VudCB0aGF0IG93bnNcbiAgICogICAgICAgICAgdGhlIHJvbGUuIFlvdSBjYW5ub3QgdXNlIHNlc3Npb24gcG9saWNpZXMgdG8gZ3JhbnQgbW9yZSBwZXJtaXNzaW9ucyB0aGFuIHRob3NlIGFsbG93ZWRcbiAgICogICAgICAgICAgYnkgdGhlIGlkZW50aXR5LWJhc2VkIHBvbGljeSBvZiB0aGUgcm9sZSB0aGF0IGlzIGJlaW5nIGFzc3VtZWQuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbiAgICogICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9JQU0vbGF0ZXN0L1VzZXJHdWlkZS9hY2Nlc3NfcG9saWNpZXMuaHRtbCNwb2xpY2llc19zZXNzaW9uXCI+U2Vzc2lvblxuICAgKiAgICAgICAgICAgICBQb2xpY2llczwvYT4gaW4gdGhlIDxpPklBTSBVc2VyIEd1aWRlPC9pPi48L3A+XG4gICAqL1xuICBQb2xpY3lBcm5zPzogeyBhcm4/OiBzdHJpbmcgfVtdO1xuXG4gIC8qKlxuICAgKiA8cD5BbiBJQU0gcG9saWN5IGluIEpTT04gZm9ybWF0IHRoYXQgeW91IHdhbnQgdG8gdXNlIGFzIGFuIGlubGluZSBzZXNzaW9uIHBvbGljeS48L3A+XG4gICAqICAgICAgICAgIDxwPlRoaXMgcGFyYW1ldGVyIGlzIG9wdGlvbmFsLiBQYXNzaW5nIHBvbGljaWVzIHRvIHRoaXMgb3BlcmF0aW9uIHJldHVybnMgbmV3XG4gICAqICAgICAgICAgIHRlbXBvcmFyeSBjcmVkZW50aWFscy4gVGhlIHJlc3VsdGluZyBzZXNzaW9uJ3MgcGVybWlzc2lvbnMgYXJlIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlXG4gICAqICAgICAgICAgIHJvbGUncyBpZGVudGl0eS1iYXNlZCBwb2xpY3kgYW5kIHRoZSBzZXNzaW9uIHBvbGljaWVzLiBZb3UgY2FuIHVzZSB0aGUgcm9sZSdzIHRlbXBvcmFyeVxuICAgKiAgICAgICAgICBjcmVkZW50aWFscyBpbiBzdWJzZXF1ZW50IEFXUyBBUEkgY2FsbHMgdG8gYWNjZXNzIHJlc291cmNlcyBpbiB0aGUgYWNjb3VudCB0aGF0IG93bnNcbiAgICogICAgICAgICAgdGhlIHJvbGUuIFlvdSBjYW5ub3QgdXNlIHNlc3Npb24gcG9saWNpZXMgdG8gZ3JhbnQgbW9yZSBwZXJtaXNzaW9ucyB0aGFuIHRob3NlIGFsbG93ZWRcbiAgICogICAgICAgICAgYnkgdGhlIGlkZW50aXR5LWJhc2VkIHBvbGljeSBvZiB0aGUgcm9sZSB0aGF0IGlzIGJlaW5nIGFzc3VtZWQuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbiAgICogICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9JQU0vbGF0ZXN0L1VzZXJHdWlkZS9hY2Nlc3NfcG9saWNpZXMuaHRtbCNwb2xpY2llc19zZXNzaW9uXCI+U2Vzc2lvblxuICAgKiAgICAgICAgICAgICBQb2xpY2llczwvYT4gaW4gdGhlIDxpPklBTSBVc2VyIEd1aWRlPC9pPi48L3A+XG4gICAqICAgICAgICAgIDxwPlRoZSBwbGFpbiB0ZXh0IHRoYXQgeW91IHVzZSBmb3IgYm90aCBpbmxpbmUgYW5kIG1hbmFnZWQgc2Vzc2lvbiBwb2xpY2llcyBjYW4ndCBleGNlZWRcbiAgICogICAgICAgICAgMiwwNDggY2hhcmFjdGVycy4gVGhlIEpTT04gcG9saWN5IGNoYXJhY3RlcnMgY2FuIGJlIGFueSBBU0NJSSBjaGFyYWN0ZXIgZnJvbSB0aGUgc3BhY2VcbiAgICogICAgICAgICAgY2hhcmFjdGVyIHRvIHRoZSBlbmQgb2YgdGhlIHZhbGlkIGNoYXJhY3RlciBsaXN0IChcXHUwMDIwIHRocm91Z2ggXFx1MDBGRikuIEl0IGNhbiBhbHNvXG4gICAqICAgICAgICAgIGluY2x1ZGUgdGhlIHRhYiAoXFx1MDAwOSksIGxpbmVmZWVkIChcXHUwMDBBKSwgYW5kIGNhcnJpYWdlIHJldHVybiAoXFx1MDAwRClcbiAgICogICAgICAgICAgY2hhcmFjdGVycy48L3A+XG4gICAqICAgICAgICAgIDxub3RlPlxuICAgKiAgICAgICAgICAgICA8cD5BbiBBV1MgY29udmVyc2lvbiBjb21wcmVzc2VzIHRoZSBwYXNzZWQgc2Vzc2lvbiBwb2xpY2llcyBhbmQgc2Vzc2lvbiB0YWdzIGludG8gYVxuICAgKiAgICAgICAgICAgICBwYWNrZWQgYmluYXJ5IGZvcm1hdCB0aGF0IGhhcyBhIHNlcGFyYXRlIGxpbWl0LiBZb3VyIHJlcXVlc3QgY2FuIGZhaWwgZm9yIHRoaXMgbGltaXRcbiAgICogICAgICAgICAgICAgZXZlbiBpZiB5b3VyIHBsYWluIHRleHQgbWVldHMgdGhlIG90aGVyIHJlcXVpcmVtZW50cy4gVGhlIDxjb2RlPlBhY2tlZFBvbGljeVNpemU8L2NvZGU+XG4gICAqICAgICAgICAgICAgIHJlc3BvbnNlIGVsZW1lbnQgaW5kaWNhdGVzIGJ5IHBlcmNlbnRhZ2UgaG93IGNsb3NlIHRoZSBwb2xpY2llcyBhbmQgdGFncyBmb3IgeW91clxuICAgKiAgICAgICAgICAgICByZXF1ZXN0IGFyZSB0byB0aGUgdXBwZXIgc2l6ZSBsaW1pdC5cbiAgICogICAgICAgICAgICAgPC9wPlxuICAgKiAgICAgICAgICA8L25vdGU+XG4gICAqL1xuICBQb2xpY3k/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIDxwPlRoZSBkdXJhdGlvbiwgaW4gc2Vjb25kcywgb2YgdGhlIHJvbGUgc2Vzc2lvbi4gVGhlIHZhbHVlIGNhbiByYW5nZSBmcm9tIDkwMCBzZWNvbmRzICgxNVxuICAgKiAgICAgICAgICBtaW51dGVzKSB1cCB0byB0aGUgbWF4aW11bSBzZXNzaW9uIGR1cmF0aW9uIHNldHRpbmcgZm9yIHRoZSByb2xlLiBUaGlzIHNldHRpbmcgY2FuIGhhdmUgYVxuICAgKiAgICAgICAgICB2YWx1ZSBmcm9tIDEgaG91ciB0byAxMiBob3Vycy4gSWYgeW91IHNwZWNpZnkgYSB2YWx1ZSBoaWdoZXIgdGhhbiB0aGlzIHNldHRpbmcsIHRoZVxuICAgKiAgICAgICAgICBvcGVyYXRpb24gZmFpbHMuIEZvciBleGFtcGxlLCBpZiB5b3Ugc3BlY2lmeSBhIHNlc3Npb24gZHVyYXRpb24gb2YgMTIgaG91cnMsIGJ1dCB5b3VyXG4gICAqICAgICAgICAgIGFkbWluaXN0cmF0b3Igc2V0IHRoZSBtYXhpbXVtIHNlc3Npb24gZHVyYXRpb24gdG8gNiBob3VycywgeW91ciBvcGVyYXRpb24gZmFpbHMuIFRvIGxlYXJuXG4gICAqICAgICAgICAgIGhvdyB0byB2aWV3IHRoZSBtYXhpbXVtIHZhbHVlIGZvciB5b3VyIHJvbGUsIHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0lBTS9sYXRlc3QvVXNlckd1aWRlL2lkX3JvbGVzX3VzZS5odG1sI2lkX3JvbGVzX3VzZV92aWV3LXJvbGUtbWF4LXNlc3Npb25cIj5WaWV3IHRoZVxuICAgKiAgICAgICAgICAgICBNYXhpbXVtIFNlc3Npb24gRHVyYXRpb24gU2V0dGluZyBmb3IgYSBSb2xlPC9hPiBpbiB0aGVcbiAgICogICAgICAgICAgICAgPGk+SUFNIFVzZXIgR3VpZGU8L2k+LjwvcD5cbiAgICogICAgICAgICAgPHA+QnkgZGVmYXVsdCwgdGhlIHZhbHVlIGlzIHNldCB0byA8Y29kZT4zNjAwPC9jb2RlPiBzZWNvbmRzLiA8L3A+XG4gICAqICAgICAgICAgIDxub3RlPlxuICAgKiAgICAgICAgICAgICA8cD5UaGUgPGNvZGU+RHVyYXRpb25TZWNvbmRzPC9jb2RlPiBwYXJhbWV0ZXIgaXMgc2VwYXJhdGUgZnJvbSB0aGUgZHVyYXRpb24gb2YgYSBjb25zb2xlXG4gICAqICAgICAgICAgICAgIHNlc3Npb24gdGhhdCB5b3UgbWlnaHQgcmVxdWVzdCB1c2luZyB0aGUgcmV0dXJuZWQgY3JlZGVudGlhbHMuIFRoZSByZXF1ZXN0IHRvIHRoZVxuICAgKiAgICAgICAgICAgICBmZWRlcmF0aW9uIGVuZHBvaW50IGZvciBhIGNvbnNvbGUgc2lnbi1pbiB0b2tlbiB0YWtlcyBhIDxjb2RlPlNlc3Npb25EdXJhdGlvbjwvY29kZT5cbiAgICogICAgICAgICAgICAgcGFyYW1ldGVyIHRoYXQgc3BlY2lmaWVzIHRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgY29uc29sZSBzZXNzaW9uLiBGb3IgbW9yZVxuICAgKiAgICAgICAgICAgICBpbmZvcm1hdGlvbiwgc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vSUFNL2xhdGVzdC9Vc2VyR3VpZGUvaWRfcm9sZXNfcHJvdmlkZXJzX2VuYWJsZS1jb25zb2xlLWN1c3RvbS11cmwuaHRtbFwiPkNyZWF0aW5nIGEgVVJMXG4gICAqICAgICAgICAgICAgICAgIHRoYXQgRW5hYmxlcyBGZWRlcmF0ZWQgVXNlcnMgdG8gQWNjZXNzIHRoZSBBV1MgTWFuYWdlbWVudCBDb25zb2xlPC9hPiBpbiB0aGVcbiAgICogICAgICAgICAgICAgICAgPGk+SUFNIFVzZXIgR3VpZGU8L2k+LjwvcD5cbiAgICogICAgICAgICAgPC9ub3RlPlxuICAgKi9cbiAgRHVyYXRpb25TZWNvbmRzPzogbnVtYmVyO1xufVxuXG50eXBlIExvd2VyQ2FzZUtleTxUPiA9IHsgW0sgaW4ga2V5b2YgVCBhcyBgJHtVbmNhcGl0YWxpemU8c3RyaW5nICYgSz59YF06IFRbS10gfTtcbmV4cG9ydCBpbnRlcmZhY2UgRnJvbVdlYlRva2VuSW5pdCBleHRlbmRzIE9taXQ8TG93ZXJDYXNlS2V5PEFzc3VtZVJvbGVXaXRoV2ViSWRlbnRpdHlQYXJhbXM+LCBcInJvbGVTZXNzaW9uTmFtZVwiPiB7XG4gIC8qKlxuICAgKiBUaGUgSUFNIHNlc3Npb24gbmFtZSB1c2VkIHRvIGRpc3Rpbmd1aXNoIHNlc3Npb25zLlxuICAgKi9cbiAgcm9sZVNlc3Npb25OYW1lPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgYXNzdW1lcyBhIHJvbGUgd2l0aCB3ZWIgaWRlbnRpdHkgYW5kIHJldHVybnMgYSBwcm9taXNlIGZ1bGZpbGxlZCB3aXRoXG4gICAqIGNyZWRlbnRpYWxzIGZvciB0aGUgYXNzdW1lZCByb2xlLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIGlucHV0IHBhcmFtZXRlciBvZiBzdHM6QXNzdW1lUm9sZVdpdGhXZWJJZGVudGl0eSBBUEkuXG4gICAqL1xuICByb2xlQXNzdW1lcldpdGhXZWJJZGVudGl0eT86IChwYXJhbXM6IEFzc3VtZVJvbGVXaXRoV2ViSWRlbnRpdHlQYXJhbXMpID0+IFByb21pc2U8Q3JlZGVudGlhbHM+O1xufVxuXG5leHBvcnQgY29uc3QgZnJvbVdlYlRva2VuID1cbiAgKGluaXQ6IEZyb21XZWJUb2tlbkluaXQpOiBDcmVkZW50aWFsUHJvdmlkZXIgPT5cbiAgKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHJvbGVBcm4sXG4gICAgICByb2xlU2Vzc2lvbk5hbWUsXG4gICAgICB3ZWJJZGVudGl0eVRva2VuLFxuICAgICAgcHJvdmlkZXJJZCxcbiAgICAgIHBvbGljeUFybnMsXG4gICAgICBwb2xpY3ksXG4gICAgICBkdXJhdGlvblNlY29uZHMsXG4gICAgICByb2xlQXNzdW1lcldpdGhXZWJJZGVudGl0eSxcbiAgICB9ID0gaW5pdDtcblxuICAgIGlmICghcm9sZUFzc3VtZXJXaXRoV2ViSWRlbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBDcmVkZW50aWFsc1Byb3ZpZGVyRXJyb3IoXG4gICAgICAgIGBSb2xlIEFybiAnJHtyb2xlQXJufScgbmVlZHMgdG8gYmUgYXNzdW1lZCB3aXRoIHdlYiBpZGVudGl0eSxgICtcbiAgICAgICAgICBgIGJ1dCBubyByb2xlIGFzc3VtcHRpb24gY2FsbGJhY2sgd2FzIHByb3ZpZGVkLmAsXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiByb2xlQXNzdW1lcldpdGhXZWJJZGVudGl0eSh7XG4gICAgICBSb2xlQXJuOiByb2xlQXJuLFxuICAgICAgUm9sZVNlc3Npb25OYW1lOiByb2xlU2Vzc2lvbk5hbWUgPz8gYGF3cy1zZGstanMtc2Vzc2lvbi0ke0RhdGUubm93KCl9YCxcbiAgICAgIFdlYklkZW50aXR5VG9rZW46IHdlYklkZW50aXR5VG9rZW4sXG4gICAgICBQcm92aWRlcklkOiBwcm92aWRlcklkLFxuICAgICAgUG9saWN5QXJuczogcG9saWN5QXJucyxcbiAgICAgIFBvbGljeTogcG9saWN5LFxuICAgICAgRHVyYXRpb25TZWNvbmRzOiBkdXJhdGlvblNlY29uZHMsXG4gICAgfSk7XG4gIH07XG4iXX0=